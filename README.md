# Тестовое задание команды системной производительности для стажировки 2025: Оптимизация запросов в PostgreSQL

Анализ и оптимизация SQL-запросов в PostgreSQL с объяснением причин медленной работы и способов ускорения.

---

## Оглавление

- [I. Инициализация](#i-ициализация)
  - [1. Установка PostgreSQL 16](#1-установка-postgresql-16)
  - [2. Генерация БД с помощью предложенного скрипта](#2-генерация-бд-с-помощью-предложенного-скрипта)
- [II. Решение](#ii-решение)
  - [1. Задача 1](#1-задача-1)
  - [2. Задача 2](#2-задача-2)
  - [3. Задача 3](#3-задача-3)
  - [4. Задача 4](#4-задача-4)
  - [5. Задача 5](#5-задача-5)

---

## I. Инициализация

### 1. Установка PostgreSQL 16

Я установил новейшую версию PostgreSQL 16.8 с классическим портом 5432 и пользователем postgres.

### 2. Генерация БД с помощью предложенного скрипта

Я создал скрипт из предложенного в задании, сохранил комментарии для основных блоков (отключение параллельных запросов; генерация базы t1 из 10^7 записей; генерация базы t2 из 5*10^6 записей) и назвал [gen_dbs.sql](gen_dbs.sql). 
В терминале psql я его запустил. Проверка выполнения ниже:

**Вывод:**

```sql
postgres-# \dti+
                                       Список отношений
 Схема  | Имя |   Тип   | Владелец | Таблица |  Хранение  | Метод доступа | Размер | Описание
--------+-----+---------+----------+---------+------------+---------------+--------+----------
 public | t1  | таблица | postgres |         | постоянное | heap          | 652 MB |
 public | t2  | таблица | postgres |         | постоянное | heap          | 249 MB |
(2 строки)
```